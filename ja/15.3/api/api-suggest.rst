===========
サジェストAPI
===========

サジェストワード一覧の取得
====================

リクエスト
--------

==================  ====================================================
HTTPメソッド         GET
エンドポイント        ``/api/v1/suggest-words``
==================  ====================================================

|Fess| に、 ``http://<Server Name>/api/v1/suggest-words?q=サジェストワード`` のリクエストを送ることで、|Fess| に登録されているサジェストワードの一覧をJSON形式で受け取ることができます。
サジェストワードAPIを利用するには、管理画面のシステム > 全般の設定で「ドキュメントでサジェスト」または「検索語でサジェスト」を有効にしておく必要があります。

リクエストパラメーター
-----------------

使用できるリクエストパラメーターは以下の通りです。

.. tabularcolumns:: |p{3cm}|p{12cm}|
.. list-table:: リクエストパラメーター

   * - q
     - サジェストを行うキーワード。 (例) ``q=fess``
   * - num
     - サジェストされる単語の数。デフォルト10。 (例) ``num=20``
   * - label
     - フィルターされたラベル名。 (例) ``label=java``
   * - fields
     - サジェスト対象を絞り込むフィールド名。デフォルト絞り込みなし。 (例) ``fields=content,title``
   * - lang
     - 検索言語の指定。 (例) ``lang=en``


レスポンス
--------

以下のようなレスポンスが返ります。

::

    {
      "query_time": 18,
      "record_count": 355,
      "page_size": 10,
      "data": [
        {
          "text": "fess",
          "labels": [
            "java",
            "python"
          ]
        }
      ]
    }

各要素については以下の通りです。

.. tabularcolumns:: |p{3cm}|p{12cm}|
.. list-table:: レスポンス情報

   * - query_time
     - クエリ処理時間（単位はミリ秒）。
   * - record_count
     - サジェストワードの登録件数。
   * - page_size
     - ページサイズ。
   * - data
     - 検索結果の親要素。
   * - text
     - サジェストワード。
   * - labels
     - ラベルの値の配列。

エラーレスポンス
==============

サジェストAPIが失敗した場合、以下のようなエラーレスポンスが返されます。

.. tabularcolumns:: |p{4cm}|p{11cm}|
.. list-table:: エラーレスポンス

   * - ステータスコード
     - 説明
   * - 400 Bad Request
     - リクエストパラメーターが不正な場合
   * - 500 Internal Server Error
     - サーバー内部エラーが発生した場合
