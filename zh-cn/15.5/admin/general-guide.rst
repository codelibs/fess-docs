====
常规
====

概述
====

在此管理页面,可以管理 |Fess| 的配置。
可以在不重启 |Fess| 的情况下更改各种 |Fess| 配置。

|image0|

配置内容
======

系统
------

JSON响应
::::::::::::

指定是否启用 JSON API。

需要登录
:::::::::::

指定搜索功能是否需要登录。

显示登录链接
::::::::::::::

设置是否在搜索界面显示登录页面的链接。

折叠重复结果
::::::::::::::

设置是否启用重复结果折叠。

缩略图显示
:::::::::::

设置是否启用缩略图显示。

默认标签值
:::::::::::::::

描述默认添加到搜索条件的标签值。
按角色或组指定时,请加上 role: 或 group: 前缀,如"role:admin=label1"。

默认排序值
:::::::::::::::

描述默认添加到搜索条件的排序值。
按角色或组指定时,请加上 role: 或 group: 前缀,如"role:admin=content_length.desc"。

虚拟主机
::::::::

设置虚拟主机。
详情请参考 :doc:`配置指南的虚拟主机 <../config/virtual-host>`。

热门词响应
:::::::::::::::::

指定是否启用热门词 API。

CSV文件编码
::::::::::::::::::

指定下载 CSV 文件的编码。

添加搜索参数
:::::::::::::::::

在搜索结果显示中传递参数时启用。

通知邮件
::::::::

指定爬取完成时通知的邮箱地址。
可以用逗号分隔指定多个地址。使用此功能需要邮件服务器。

爬虫
--------

检查最后更新时间
::::::::::::::

执行差分爬取时启用。

并发爬虫配置
::::::::::::::

指定同时执行的爬取配置数。

删除旧文档
::::::::::::::::::

指定索引后的有效期天数。

排除的错误类型
:::::::::::::::

超过阈值的故障 URL 将被排除在爬取对象之外,但此处指定的异常名称等即使超过阈值也会作为爬取对象。

故障数阈值
::::::::::::

如果爬取对象的文档被记录为故障 URL 的次数超过此处指定的次数,则在下次爬取时将被排除。

日志记录
------

搜索日志
::::::

指定是否启用搜索日志记录。

用户日志
::::::::

指定是否启用用户日志记录。

收藏日志
:::::::::::

指定是否启用收藏日志记录。

删除旧搜索日志
:::::::::::::::

删除指定天数之前的搜索日志。

删除旧作业日志
:::::::::::::::::

删除指定天数之前的作业日志。

删除旧用户日志
::::::::::::::::::

删除指定天数之前的用户日志。

要删除日志的机器人名称
:::::::::::::::::

指定要从搜索日志中排除的机器人名称。

日志级别
::::::::

指定 fess.log 的日志级别。

建议
--------

搜索词建议
::::::::::::::

指定是否从搜索日志生成建议候选。

文档建议
::::::::::::::::::

指定是否从已索引的文档生成建议候选。

删除旧建议信息
::::::::::::::::::::

删除指定天数之前的建议数据。

LDAP
----

LDAP URL
::::::::

指定 LDAP 服务器的 URL。

Base DN
:::::::

指定登录搜索界面的基本识别名。

Bind DN
:::::::

指定管理员的 Bind DN。

密码
::::::::

指定 Bind DN 的密码。

User DN
:::::::

指定用户的识别名。

账户过滤器
:::::::::::::::

指定用户的 Common Name 或 uid 等。

组过滤器
::::::::::::::

指定要获取的组的过滤条件。

memberOf属性
:::::::::::

指定 LDAP 服务器可用的 memberOf 属性名。
对于 Active Directory,为 memberOf。
对于其他 LDAP 服务器,也可能是 isMemberOf。


公告显示
---------

登录页面
:::::::::::

描述在登录界面显示的消息。

搜索首页
::::::::::::

描述在搜索首页界面显示的消息。

存储
--------

配置各项后,左侧菜单将显示[系统 > 存储]菜单。
有关文件管理,请参考 :doc:`存储 <../admin/storage-guide>`。

类型
::::

指定存储类型。
选择"自动"时,将根据端点自动判断存储类型。

- **自动**: 根据端点自动判断
- **S3**: Amazon S3
- **GCS**: Google Cloud Storage

存储桶
::::::

指定要管理的存储桶名称。

端点
:::::::::::

指定存储服务器的端点 URL。

- S3: 为空时使用 AWS 默认端点
- GCS: 为空时使用 Google Cloud 默认端点
- MinIO 等: MinIO 服务器的端点 URL

访问密钥
::::::::::

指定 S3 或 S3 兼容存储的访问密钥。

私密密钥
:::::::::::::

指定 S3 或 S3 兼容存储的私密密钥。

区域
::::

指定 S3 的区域（例如: ap-northeast-1）。

项目ID
::::::

指定 GCS 的 Google Cloud 项目 ID。

凭据路径
::::::::

指定 GCS 用服务账户凭据 JSON 文件的路径。

示例
==

LDAP配置示例
----------

.. tabularcolumns:: |p{4cm}|p{4cm}|p{4cm}|
.. list-table:: LDAP/Active Directory 的配置
   :header-rows: 1

   * - 名称
     - 值 (LDAP)
     - 值 (Active Directory)
   * - LDAP URL
     - ldap://SERVERNAME:389
     - ldap://SERVERNAME:389
   * - Base DN
     - cn=Directory Manager
     - dc=fess,dc=codelibs,dc=org
   * - Bind DN
     - uid=%s,ou=People,dc=fess,dc=codelibs,dc=org
     - manager@fess.codelibs.org
   * - User DN
     - uid=%s,ou=People,dc=fess,dc=codelibs,dc=org
     - %s@fess.codelibs.org
   * - 账户过滤器
     - cn=%s 或 uid=%s
     - (&(objectClass=user)(sAMAccountName=%s))
   * - 组过滤器
     -
     - (member:1.2.840.113556.1.4.1941:=%s)
   * - memberOf
     - isMemberOf
     - memberOf


.. |image0| image:: ../../../resources/images/en/15.5/admin/general-1.png
.. pdf            :height: 940 px
